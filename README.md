# EcoQuest (Python / FastAPI)

EcoQuest is a compact, thoughtfully designed FastAPI service that helps users ask sustainability questions, classify trash from images, and generate environmental quizzes. The codebase has several features: modular services, clear dependency management, and simple endpoints that integrate Google Generative AI (Gemini), Roboflow inference, and Google Custom Search.

---

## Quick Snapshot
- Tech: FastAPI, LangChain, Google Generative AI (Gemini), Roboflow inference, Google Custom Search.
- Purpose: Answer sustainability questions with context, detect/advise on trash from images, and emit multi-choice quiz content.
- Run locally: `uvicorn main:app --reload`

---

## Why this structure?
The project separates concerns into compact services so each responsibility can be developed and tested independently. 

---

## Core components
- Entry point: [main.py](main.py)
- API router & auth: [`app.api.endpoints.get_current_user`](app/api/endpoints.py) and the routes in [app/api/endpoints.py](app/api/endpoints.py)
- LangChain / Gemini integration: [`app.services.langchain_service.sustainability_chatbot_response`](app/services/langchain_service.py)
- Google Custom Search -> Doc context: [`app.services.gcs_service.search_google`](app/services/gcs_service.py)
- Trash detection hooks: [`app.services.trash_detection.classify_and_advise`](app/services/trash_detection.py) plus helpers [`identify_object`](app/services/trash_detection.py) and [`trash_detection`](app/services/trash_detection.py)
- AI-powered Quiz Generator: [`app.services.quiz_bot.quiz_bot_response`](app/services/quiz_bot.py)
- Request/response schemas: [`app.models.schemas.QueryRequest`](app/models/schemas.py), [`app.models.schemas.GeminiResponse`](app/models/schemas.py)

---

## Endpoints (high-level)
- GET `/test` — sanity check that returns a lightweight JSON message.
- POST `/ask` — accepts a query and returns a Gemini-backed answer. Uses Google Custom Search to build contextual documents and `sustainability_chatbot_response` to generate replies.
- POST `/classify-trash` — multipart image upload, returns structured analysis (tries to parse JSON from Gemini output). Under the hood it calls Roboflow models via `classify_and_advise`.
- POST `/quiz-bot` — returns an environmental quiz generated by Gemini.

See routes and authentication logic in [app/api/endpoints.py](app/api/endpoints.py).

---

## Local setup (one-liner)
1. Create a venv and install deps:
```bash
python -m venv .venv
.venv/Scripts/activate   # or `source .venv/bin/activate` on macOS/Linux
pip install -r [requirements.txt](http://_vscodecontentref_/0)
```
2. Populate .env.local with keys (or copy the sample and set values).
Launch:
uvicorn main:app --reload
